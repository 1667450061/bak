
#include <linux/init.h>
#include <linux/module.h>
#include <linux/slab.h>
#include <linux/i2c.h>
#include <linux/delay.h>
#include <linux/videodev2.h>
#include <media/v4l2-device.h>
#include <media/v4l2-chip-ident.h>
#include <media/v4l2-mediabus.h>
#include <plat/comip-v4l2.h>
#include <plat/camera.h>
#include "hm5065.h"
#include <linux/time.h>
#include <linux/unistd.h>





#define HM5065_CHIP_ID_H	(0x03)
#define HM5065_CHIP_ID_L	(0x9e)

//#define VGA_WIDTH		640
//#define VGA_HEIGHT		480
#define SXGA_WIDTH		1280
#define SXGA_HEIGHT		960
#define MAX_WIDTH		2592
#define MAX_HEIGHT		1944
#define MAX_PREVIEW_WIDTH	SXGA_WIDTH
#define MAX_PREVIEW_HEIGHT  SXGA_HEIGHT

#define HM5065_REG_END		0xfffe
#define HM5065_REG_DELAY	0xfffd

//#define HM5065_DEBUG_FUNC
//#define HM5065_VGA_SIZE

struct hm5065_format_struct;
struct hm5065_info {
	struct v4l2_subdev sd;
	struct hm5065_format_struct *fmt;
	struct hm5065_win_size *win;
	int brightness;
	int contrast;
	int frame_rate;
};

struct regval_list {
	unsigned short reg_num;
	unsigned char value;
};

static struct regval_list hm5065_init_regs[] = {
	{0xffff,0x01},
	{0x9000,0x03},
	{0xA000,0x90},
	{0xA001,0x0C},
	{0xA002,0x56},
	{0xA003,0xE0},
	{0xA004,0xFE},
	{0xA005,0xA3},
	{0xA006,0xE0},
	{0xA007,0xFF},
	{0xA008,0x12},
	{0xA009,0x42},
	{0xA00A,0x85},
	{0xA00B,0x90},
	{0xA00C,0x01},
	{0xA00D,0xB7},
	{0xA00E,0xEE},
	{0xA00F,0xF0},
	{0xA010,0xFC},
	{0xA011,0xA3},
	{0xA012,0xEF},
	{0xA013,0xF0},
	{0xA014,0xFD},
	{0xA015,0x90},
	{0xA016,0x06},
	{0xA017,0x05},
	{0xA018,0xE0},
	{0xA019,0x75},
	{0xA01A,0xF0},
	{0xA01B,0x02},
	{0xA01C,0xA4},
	{0xA01D,0x2D},
	{0xA01E,0xFF},
	{0xA01F,0xE5},
	{0xA020,0xF0},
	{0xA021,0x3C},
	{0xA022,0xFE},
	{0xA023,0xAB},
	{0xA024,0x07},
	{0xA025,0xFA},
	{0xA026,0x33},
	{0xA027,0x95},
	{0xA028,0xE0},
	{0xA029,0xF9},
	{0xA02A,0xF8},
	{0xA02B,0x90},
	{0xA02C,0x0B},
	{0xA02D,0x4B},
	{0xA02E,0xE0},
	{0xA02F,0xFE},
	{0xA030,0xA3},
	{0xA031,0xE0},
	{0xA032,0xFF},
	{0xA033,0xEE},
	{0xA034,0x33},
	{0xA035,0x95},
	{0xA036,0xE0},
	{0xA037,0xFD},
	{0xA038,0xFC},
	{0xA039,0x12},
	{0xA03A,0x0C},
	{0xA03B,0x7B},
	{0xA03C,0x90},
	{0xA03D,0x01},
	{0xA03E,0xB9},
	{0xA03F,0x12},
	{0xA040,0x0E},
	{0xA041,0x05},
	{0xA042,0x90},
	{0xA043,0x01},
	{0xA044,0xB9},
	{0xA045,0xE0},
	{0xA046,0xFC},
	{0xA047,0xA3},
	{0xA048,0xE0},
	{0xA049,0xFD},
	{0xA04A,0xA3},
	{0xA04B,0xE0},
	{0xA04C,0xFE},
	{0xA04D,0xA3},
	{0xA04E,0xE0},
	{0xA04F,0xFF},
	{0xA050,0x78},
	{0xA051,0x08},
	{0xA052,0x12},
	{0xA053,0x0D},
	{0xA054,0xBF},
	{0xA055,0xA8},
	{0xA056,0x04},
	{0xA057,0xA9},
	{0xA058,0x05},
	{0xA059,0xAA},
	{0xA05A,0x06},
	{0xA05B,0xAB},
	{0xA05C,0x07},
	{0xA05D,0x90},
	{0xA05E,0x0B},
	{0xA05F,0x49},
	{0xA060,0xE0},
	{0xA061,0xFE},
	{0xA062,0xA3},
	{0xA063,0xE0},
	{0xA064,0xFF},
	{0xA065,0xEE},
	{0xA066,0x33},
	{0xA067,0x95},
	{0xA068,0xE0},
	{0xA069,0xFD},
	{0xA06A,0xFC},
	{0xA06B,0xC3},
	{0xA06C,0xEF},
	{0xA06D,0x9B},
	{0xA06E,0xFF},
	{0xA06F,0xEE},
	{0xA070,0x9A},
	{0xA071,0xFE},
	{0xA072,0xED},
	{0xA073,0x99},
	{0xA074,0xFD},
	{0xA075,0xEC},
	{0xA076,0x98},
	{0xA077,0xFC},
	{0xA078,0x78},
	{0xA079,0x01},
	{0xA07A,0x12},
	{0xA07B,0x0D},
	{0xA07C,0xBF},
	{0xA07D,0x90},
	{0xA07E,0x0C},
	{0xA07F,0x4A},
	{0xA080,0xE0},
	{0xA081,0xFC},
	{0xA082,0xA3},
	{0xA083,0xE0},
	{0xA084,0xF5},
	{0xA085,0x82},
	{0xA086,0x8C},
	{0xA087,0x83},
	{0xA088,0xC0},
	{0xA089,0x83},
	{0xA08A,0xC0},
	{0xA08B,0x82},
	{0xA08C,0x90},
	{0xA08D,0x0B},
	{0xA08E,0x48},
	{0xA08F,0xE0},
	{0xA090,0xD0},
	{0xA091,0x82},
	{0xA092,0xD0},
	{0xA093,0x83},
	{0xA094,0x75},
	{0xA095,0xF0},
	{0xA096,0x02},
	{0xA097,0x12},
	{0xA098,0x0E},
	{0xA099,0x45},
	{0xA09A,0xEE},
	{0xA09B,0xF0},
	{0xA09C,0xA3},
	{0xA09D,0xEF},
	{0xA09E,0xF0},
	{0xA09F,0x02},
	{0xA0A0,0xBA},
	{0xA0A1,0xD8},
	{0xA0A2,0x90},
	{0xA0A3,0x30},
	{0xA0A4,0x18},
	{0xA0A5,0xe4},
	{0xA0A6,0xf0},
	{0xA0A7,0x74},
	{0xA0A8,0x3f},
	{0xA0A9,0xf0},
	{0xA0AA,0x22},
	{0xA0BF,0x90},
	{0xA0C0,0x00},
	{0xA0C1,0x5E},
	{0xA0C2,0xE0},
	{0xA0C3,0xFF},
	{0xA0C4,0x70},
	{0xA0C5,0x20},
	{0xA0C6,0x90},
	{0xA0C7,0x47},
	{0xA0C8,0x04},
	{0xA0C9,0x74},
	{0xA0CA,0x0A},
	{0xA0CB,0xF0},
	{0xA0CC,0xA3},
	{0xA0CD,0x74},
	{0xA0CE,0x30},
	{0xA0CF,0xF0},
	{0xA0D0,0x90},
	{0xA0D1,0x47},
	{0xA0D2,0x0C},
	{0xA0D3,0x74},
	{0xA0D4,0x07},
	{0xA0D5,0xF0},
	{0xA0D6,0xA3},
	{0xA0D7,0x74},
	{0xA0D8,0xA8},
	{0xA0D9,0xF0},
	{0xA0DA,0x90},
	{0xA0DB,0x47},
	{0xA0DC,0xA4},
	{0xA0DD,0x74},
	{0xA0DE,0x01},
	{0xA0DF,0xF0},
	{0xA0E0,0x90},
	{0xA0E1,0x47},
	{0xA0E2,0xA8},
	{0xA0E3,0xF0},
	{0xA0E4,0x80},
	{0xA0E5,0x50},
	{0xA0E6,0xEF},
	{0xA0E7,0x64},
	{0xA0E8,0x01},
	{0xA0E9,0x60},
	{0xA0EA,0x04},
	{0xA0EB,0xEF},
	{0xA0EC,0xB4},
	{0xA0ED,0x03},
	{0xA0EE,0x20},
	{0xA0EF,0x90},
	{0xA0F0,0x47},
	{0xA0F1,0x04},
	{0xA0F2,0x74},
	{0xA0F3,0x05},
	{0xA0F4,0xF0},
	{0xA0F5,0xA3},
	{0xA0F6,0x74},
	{0xA0F7,0x18},
	{0xA0F8,0xF0},
	{0xA0F9,0x90},
	{0xA0FA,0x47},
	{0xA0FB,0x0C},
	{0xA0FC,0x74},
	{0xA0FD,0x03},
	{0xA0FE,0xF0},
	{0xA0FF,0xA3},
	{0xA100,0x74},
	{0xA101,0xD4},
	{0xA102,0xF0},
	{0xA103,0x90},
	{0xA104,0x47},
	{0xA105,0xA4},
	{0xA106,0x74},
	{0xA107,0x02},
	{0xA108,0xF0},
	{0xA109,0x90},
	{0xA10A,0x47},
	{0xA10B,0xA8},
	{0xA10C,0xF0},
	{0xA10D,0x80},
	{0xA10E,0x27},
	{0xA10F,0xEF},
	{0xA110,0x64},
	{0xA111,0x02},
	{0xA112,0x60},
	{0xA113,0x04},
	{0xA114,0xEF},
	{0xA115,0xB4},
	{0xA116,0x04},
	{0xA117,0x1E},
	{0xA118,0x90},
	{0xA119,0x47},
	{0xA11A,0x04},
	{0xA11B,0x74},
	{0xA11C,0x02},
	{0xA11D,0xF0},
	{0xA11E,0xA3},
	{0xA11F,0x74},
	{0xA120,0x8C},
	{0xA121,0xF0},
	{0xA122,0x90},
	{0xA123,0x47},
	{0xA124,0x0C},
	{0xA125,0x74},
	{0xA126,0x01},
	{0xA127,0xF0},
	{0xA128,0xA3},
	{0xA129,0x74},
	{0xA12A,0xEA},
	{0xA12B,0xF0},
	{0xA12C,0x90},
	{0xA12D,0x47},
	{0xA12E,0xA4},
	{0xA12F,0x74},
	{0xA130,0x04},
	{0xA131,0xF0},
	{0xA132,0x90},
	{0xA133,0x47},
	{0xA134,0xA8},
	{0xA135,0xF0},
	{0xA136,0x22},
	{0xA137,0x74},
	{0xA138,0x04},
	{0xA139,0xF0},
	{0xA13A,0xA3},
	{0xA13B,0x74},
	{0xA13C,0x20},
	{0xA13D,0xF0},
	{0xA13E,0xE4},
	{0xA13F,0xF5},
	{0xA140,0x22},
	{0xA141,0xE5},
	{0xA142,0x22},
	{0xA143,0xC3},
	{0xA144,0x94},
	{0xA145,0x40},
	{0xA146,0x40},
	{0xA147,0x03},
	{0xA148,0x02},
	{0xA149,0xF1},
	{0xA14A,0xFD},
	{0xA14B,0x90},
	{0xA14C,0x0A},
	{0xA14D,0xBA},
	{0xA14E,0xE0},
	{0xA14F,0xFE},
	{0xA150,0xA3},
	{0xA151,0xE0},
	{0xA152,0xFF},
	{0xA153,0xF5},
	{0xA154,0x82},
	{0xA155,0x8E},
	{0xA156,0x83},
	{0xA157,0xE0},
	{0xA158,0x54},
	{0xA159,0x70},
	{0xA15A,0xFD},
	{0xA15B,0xC4},
	{0xA15C,0x54},
	{0xA15D,0x0F},
	{0xA15E,0xFD},
	{0xA15F,0x90},
	{0xA160,0x0A},
	{0xA161,0xBC},
	{0xA162,0xE0},
	{0xA163,0xFA},
	{0xA164,0xA3},
	{0xA165,0xE0},
	{0xA166,0xF5},
	{0xA167,0x82},
	{0xA168,0x8A},
	{0xA169,0x83},
	{0xA16A,0xED},
	{0xA16B,0xF0},
	{0xA16C,0x90},
	{0xA16D,0x0A},
	{0xA16E,0xBD},
	{0xA16F,0xE0},
	{0xA170,0x04},
	{0xA171,0xF0},
	{0xA172,0x70},
	{0xA173,0x06},
	{0xA174,0x90},
	{0xA175,0x0A},
	{0xA176,0xBC},
	{0xA177,0xE0},
	{0xA178,0x04},
	{0xA179,0xF0},
	{0xA17A,0x8F},
	{0xA17B,0x82},
	{0xA17C,0x8E},
	{0xA17D,0x83},
	{0xA17E,0xA3},
	{0xA17F,0xE0},
	{0xA180,0xFF},
	{0xA181,0x90},
	{0xA182,0x0A},
	{0xA183,0xBC},
	{0xA184,0xE0},
	{0xA185,0xFC},
	{0xA186,0xA3},
	{0xA187,0xE0},
	{0xA188,0xF5},
	{0xA189,0x82},
	{0xA18A,0x8C},
	{0xA18B,0x83},
	{0xA18C,0xEF},
	{0xA18D,0xF0},
	{0xA18E,0x90},
	{0xA18F,0x0A},
	{0xA190,0xBD},
	{0xA191,0xE0},
	{0xA192,0x04},
	{0xA193,0xF0},
	{0xA194,0x70},
	{0xA195,0x06},
	{0xA196,0x90},
	{0xA197,0x0A},
	{0xA198,0xBC},
	{0xA199,0xE0},
	{0xA19A,0x04},
	{0xA19B,0xF0},
	{0xA19C,0x90},
	{0xA19D,0x0A},
	{0xA19E,0xBA},
	{0xA19F,0xE0},
	{0xA1A0,0xFE},
	{0xA1A1,0xA3},
	{0xA1A2,0xE0},
	{0xA1A3,0xFF},
	{0xA1A4,0xF5},
	{0xA1A5,0x82},
	{0xA1A6,0x8E},
	{0xA1A7,0x83},
	{0xA1A8,0xE0},
	{0xA1A9,0x54},
	{0xA1AA,0x07},
	{0xA1AB,0xFD},
	{0xA1AC,0x90},
	{0xA1AD,0x0A},
	{0xA1AE,0xBC},
	{0xA1AF,0xE0},
	{0xA1B0,0xFA},
	{0xA1B1,0xA3},
	{0xA1B2,0xE0},
	{0xA1B3,0xF5},
	{0xA1B4,0x82},
	{0xA1B5,0x8A},
	{0xA1B6,0x83},
	{0xA1B7,0xED},
	{0xA1B8,0xF0},
	{0xA1B9,0x90},
	{0xA1BA,0x0A},
	{0xA1BB,0xBD},
	{0xA1BC,0xE0},
	{0xA1BD,0x04},
	{0xA1BE,0xF0},
	{0xA1BF,0x70},
	{0xA1C0,0x06},
	{0xA1C1,0x90},
	{0xA1C2,0x0A},
	{0xA1C3,0xBC},
	{0xA1C4,0xE0},
	{0xA1C5,0x04},
	{0xA1C6,0xF0},
	{0xA1C7,0x8F},
	{0xA1C8,0x82},
	{0xA1C9,0x8E},
	{0xA1CA,0x83},
	{0xA1CB,0xA3},
	{0xA1CC,0xA3},
	{0xA1CD,0xE0},
	{0xA1CE,0xFF},
	{0xA1CF,0x90},
	{0xA1D0,0x0A},
	{0xA1D1,0xBC},
	{0xA1D2,0xE0},
	{0xA1D3,0xFC},
	{0xA1D4,0xA3},
	{0xA1D5,0xE0},
	{0xA1D6,0xF5},
	{0xA1D7,0x82},
	{0xA1D8,0x8C},
	{0xA1D9,0x83},
	{0xA1DA,0xEF},
	{0xA1DB,0xF0},
	{0xA1DC,0x90},
	{0xA1DD,0x0A},
	{0xA1DE,0xBD},
	{0xA1DF,0xE0},
	{0xA1E0,0x04},
	{0xA1E1,0xF0},
	{0xA1E2,0x70},
	{0xA1E3,0x06},
	{0xA1E4,0x90},
	{0xA1E5,0x0A},
	{0xA1E6,0xBC},
	{0xA1E7,0xE0},
	{0xA1E8,0x04},
	{0xA1E9,0xF0},
	{0xA1EA,0x90},
	{0xA1EB,0x0A},
	{0xA1EC,0xBB},
	{0xA1ED,0xE0},
	{0xA1EE,0x24},
	{0xA1EF,0x03},
	{0xA1F0,0xF0},
	{0xA1F1,0x90},
	{0xA1F2,0x0A},
	{0xA1F3,0xBA},
	{0xA1F4,0xE0},
	{0xA1F5,0x34},
	{0xA1F6,0x00},
	{0xA1F7,0xF0},
	{0xA1F8,0x05},
	{0xA1F9,0x22},
	{0xA1FA,0x02},
	{0xA1FB,0xF1},
	{0xA1FC,0x41},
	{0xA1FD,0x90},
	{0xA1FE,0x0A},
	{0xA1FF,0xBA},
	{0xA200,0x74},
	{0xA201,0x0E},
	{0xA202,0xF0},
	{0xA203,0xA3},
	{0xA204,0x74},
	{0xA205,0xDC},
	{0xA206,0xF0},
	{0xA207,0xA3},
	{0xA208,0x74},
	{0xA209,0x05},
	{0xA20A,0xF0},
	{0xA20B,0xA3},
	{0xA20C,0x74},
	{0xA20D,0x61},
	{0xA20E,0xF0},
	{0xA20F,0x90},
	{0xA210,0x0A},
	{0xA211,0xBA},
	{0xA212,0xE0},
	{0xA213,0xFE},
	{0xA214,0xA3},
	{0xA215,0xE0},
	{0xA216,0xAA},
	{0xA217,0x06},
	{0xA218,0xF9},
	{0xA219,0x7B},
	{0xA21A,0x01},
	{0xA21B,0xC0},
	{0xA21C,0x02},
	{0xA21D,0xA3},
	{0xA21E,0xE0},
	{0xA21F,0xFE},
	{0xA220,0xA3},
	{0xA221,0xE0},
	{0xA222,0xAA},
	{0xA223,0x06},
	{0xA224,0xF8},
	{0xA225,0xAC},
	{0xA226,0x02},
	{0xA227,0x7D},
	{0xA228,0x01},
	{0xA229,0xD0},
	{0xA22A,0x02},
	{0xA22B,0x7E},
	{0xA22C,0x00},
	{0xA22D,0x7F},
	{0xA22E,0x04},
	{0xA22F,0x12},
	{0xA230,0x0F},
	{0xA231,0x6F},
	{0xA232,0x02},
	{0xA233,0x66},
	{0xA234,0xD9},
	{0xA235,0x90},
	{0xA236,0x07},
	{0xA237,0xD0},
	{0xA238,0x02},
	{0xA239,0xA2},
	{0xA23A,0x69},
	{0xA240,0x02},
	{0xA241,0x21},
	{0xA242,0x7F},
	{0xA243,0x02},
	{0xA244,0x21},
	{0xA245,0xF4},
	{0xA246,0x02},
	{0xA247,0xA6},
	{0xA248,0x15},
	{0xA249,0x60},
	{0xA24A,0x0A},
	{0xA24B,0xEF},
	{0xA24C,0xB4},
	{0xA24D,0x01},
	{0xA24E,0x16},
	{0xA24F,0x90},
	{0xA250,0x00},
	{0xA251,0x5D},
	{0xA252,0xE0},
	{0xA253,0x70},
	{0xA254,0x10},
	{0xA255,0x12},
	{0xA256,0x26},
	{0xA257,0xC8},
	{0xA258,0x90},
	{0xA259,0x00},
	{0xA25A,0x11},
	{0xA25B,0x74},
	{0xA25C,0x30},
	{0xA25D,0xF0},
	{0xA25E,0x90},
	{0xA25F,0x00},
	{0xA260,0x10},
	{0xA261,0x74},
	{0xA262,0x01},
	{0xA263,0xF0},
	{0xA264,0x22},
	{0xA265,0x12},
	{0xA266,0x25},
	{0xA267,0xA8},
	{0xA268,0x02},
	{0xA269,0x29},
	{0xA26A,0xFC},
	{0xA26B,0x44},
	{0xA26C,0x18},
	{0xA26D,0xF0},
	{0xA26E,0x90},
	{0xA26F,0x72},
	{0xA270,0x18},
	{0xA271,0xE0},
	{0xA272,0x44},
	{0xA273,0x18},
	{0xA274,0xF0},
	{0xA275,0x00},
	{0xA276,0x00},
	{0xA277,0x00},
	{0xA278,0x00},
	{0xA279,0x00},
	{0xA27A,0x00},
	{0xA27B,0x90},
	{0xA27C,0x72},
	{0xA27D,0x08},
	{0xA27E,0xE0},
	{0xA27F,0x44},
	{0xA280,0x10},
	{0xA281,0xF0},
	{0xA282,0x90},
	{0xA283,0x72},
	{0xA284,0x14},
	{0xA285,0xE0},
	{0xA286,0x54},
	{0xA287,0xFD},
	{0xA288,0xF0},
	{0xA289,0x22},
	{0xA29B,0xF0},
	{0xA29C,0xD3},
	{0xA29D,0x90},
	{0xA29E,0x07},
	{0xA29F,0x91},
	{0xA2A0,0xE0},
	{0xA2A1,0x94},
	{0xA2A2,0x21},
	{0xA2A3,0x90},
	{0xA2A4,0x07},
	{0xA2A5,0x90},
	{0xA2A6,0xE0},
	{0xA2A7,0x64},
	{0xA2A8,0x80},
	{0xA2A9,0x94},
	{0xA2AA,0x81},
	{0xA2AB,0x40},
	{0xA2AC,0x08},
	{0xA2AD,0x90},
	{0xA2AE,0x07},
	{0xA2AF,0xCB},
	{0xA2B0,0x74},
	{0xA2B1,0xFF},
	{0xA2B2,0xF0},
	{0xA2B3,0x80},
	{0xA2B4,0x06},
	{0xA2B5,0x90},
	{0xA2B6,0x07},
	{0xA2B7,0xCB},
	{0xA2B8,0x74},
	{0xA2B9,0x01},
	{0xA2BA,0xF0},
	{0xA2BB,0x02},
	{0xA2BC,0xB5},
	{0xA2BD,0xC3},
	{0xA2BE,0x90},
	{0xA2BF,0x08},
	{0xA2C0,0x34},
	{0xA2C1,0xE0},
	{0xA2C2,0xFC},
	{0xA2C3,0xA3},
	{0xA2C4,0xE0},
	{0xA2C5,0xFD},
	{0xA2C6,0xA3},
	{0xA2C7,0xE0},
	{0xA2C8,0xFE},
	{0xA2C9,0xA3},
	{0xA2CA,0xE0},
	{0xA2CB,0xFF},
	{0xA2CC,0x90},
	{0xA2CD,0x07},
	{0xA2CE,0xD0},
	{0xA2CF,0xE0},
	{0xA2D0,0xF8},
	{0xA2D1,0xA3},
	{0xA2D2,0xE0},
	{0xA2D3,0xF9},
	{0xA2D4,0xA3},
	{0xA2D5,0xE0},
	{0xA2D6,0xFA},
	{0xA2D7,0xA3},
	{0xA2D8,0xE0},
	{0xA2D9,0xFB},
	{0xA2DA,0xD3},
	{0xA2DB,0x12},
	{0xA2DC,0x0D},
	{0xA2DD,0xAE},
	{0xA2DE,0x40},
	{0xA2DF,0x0B},
	{0xA2E0,0x12},
	{0xA2E1,0xB5},
	{0xA2E2,0x49},
	{0xA2E3,0x90},
	{0xA2E4,0x07},
	{0xA2E5,0xA4},
	{0xA2E6,0x74},
	{0xA2E7,0x02},
	{0xA2E8,0xF0},
	{0xA2E9,0x80},
	{0xA2EA,0x09},
	{0xA2EB,0x12},
	{0xA2EC,0xB7},
	{0xA2ED,0x51},
	{0xA2EE,0x90},
	{0xA2EF,0x07},
	{0xA2F0,0xA4},
	{0xA2F1,0x74},
	{0xA2F2,0x05},
	{0xA2F3,0xF0},
	{0xA2F4,0x02},
	{0xA2F5,0xA2},
	{0xA2F6,0xDA},
	{0xA2F7,0x90},
	{0xA2F8,0x0E},
	{0xA2F9,0xE0},
	{0xA2FA,0xE0},
	{0xA2FB,0xFD},
	{0xA2FC,0xA3},
	{0xA2FD,0xE0},
	{0xA2FE,0x90},
	{0xA2FF,0x02},
	{0xA300,0xA2},
	{0xA301,0xCD},
	{0xA302,0xF0},
	{0xA303,0xA3},
	{0xA304,0xED},
	{0xA305,0xF0},
	{0xA306,0x90},
	{0xA307,0x0E},
	{0xA308,0xE2},
	{0xA309,0xE0},
	{0xA30A,0xFD},
	{0xA30B,0xA3},
	{0xA30C,0xE0},
	{0xA30D,0x90},
	{0xA30E,0x02},
	{0xA30F,0xA8},
	{0xA310,0xCD},
	{0xA311,0xF0},
	{0xA312,0xA3},
	{0xA313,0xED},
	{0xA314,0xF0},
	{0xA315,0xE4},
	{0xA316,0x90},
	{0xA317,0x06},
	{0xA318,0x38},
	{0xA319,0xF0},
	{0xA31A,0x02},
	{0xA31B,0x67},
	{0xA31C,0x63},
	{0xA31D,0x90},
	{0xA31E,0x0E},
	{0xA31F,0xE8},
	{0xA320,0xE0},
	{0xA321,0x90},
	{0xA322,0x02},
	{0xA323,0x62},
	{0xA324,0xF0},
	{0xA325,0x90},
	{0xA326,0x0E},
	{0xA327,0xE9},
	{0xA328,0xE0},
	{0xA329,0x90},
	{0xA32A,0x02},
	{0xA32B,0x63},
	{0xA32C,0xF0},
	{0xA32D,0x02},
	{0xA32E,0x67},
	{0xA32F,0x1F},
	{0xA33B,0x90},
	{0xA33C,0x0E},
	{0xA33D,0x14},
	{0xA33E,0xE0},
	{0xA33F,0xFE},
	{0xA340,0xA3},
	{0xA341,0xE0},
	{0xA342,0xFF},
	{0xA343,0x90},
	{0xA344,0x06},
	{0xA345,0xD9},
	{0xA346,0xEE},
	{0xA347,0xF0},
	{0xA348,0xA3},
	{0xA349,0xEF},
	{0xA34A,0xF0},
	{0xA34B,0x90},
	{0xA34C,0x0E},
	{0xA34D,0x18},
	{0xA34E,0xE0},
	{0xA34F,0xFD},
	{0xA350,0x7C},
	{0xA351,0x00},
	{0xA352,0xC3},
	{0xA353,0xEF},
	{0xA354,0x9D},
	{0xA355,0xEE},
	{0xA356,0x9C},
	{0xA357,0x50},
	{0xA358,0x09},
	{0xA359,0xE4},
	{0xA35A,0x90},
	{0xA35B,0x06},
	{0xA35C,0xD7},
	{0xA35D,0xF0},
	{0xA35E,0xA3},
	{0xA35F,0xF0},
	{0xA360,0x80},
	{0xA361,0x13},
	{0xA362,0xC3},
	{0xA363,0x90},
	{0xA364,0x06},
	{0xA365,0xDA},
	{0xA366,0xE0},
	{0xA367,0x9D},
	{0xA368,0xFE},
	{0xA369,0x90},
	{0xA36A,0x06},
	{0xA36B,0xD9},
	{0xA36C,0xE0},
	{0xA36D,0x9C},
	{0xA36E,0x90},
	{0xA36F,0x06},
	{0xA370,0xD7},
	{0xA371,0xF0},
	{0xA372,0xA3},
	{0xA373,0xCE},
	{0xA374,0xF0},
	{0xA375,0x90},
	{0xA376,0x0E},
	{0xA377,0x18},
	{0xA378,0xE0},
	{0xA379,0xF9},
	{0xA37A,0xFF},
	{0xA37B,0x90},
	{0xA37C,0x06},
	{0xA37D,0xC2},
	{0xA37E,0xE0},
	{0xA37F,0xFC},
	{0xA380,0xA3},
	{0xA381,0xE0},
	{0xA382,0xFD},
	{0xA383,0xC3},
	{0xA384,0x9F},
	{0xA385,0xFF},
	{0xA386,0xEC},
	{0xA387,0x94},
	{0xA388,0x00},
	{0xA389,0xFE},
	{0xA38A,0x90},
	{0xA38B,0x0E},
	{0xA38C,0x16},
	{0xA38D,0xE0},
	{0xA38E,0xFA},
	{0xA38F,0xA3},
	{0xA390,0xE0},
	{0xA391,0xFB},
	{0xA392,0xD3},
	{0xA393,0x9F},
	{0xA394,0xEA},
	{0xA395,0x9E},
	{0xA396,0x40},
	{0xA397,0x0A},
	{0xA398,0x90},
	{0xA399,0x06},
	{0xA39A,0xD5},
	{0xA39B,0xEC},
	{0xA39C,0xF0},
	{0xA39D,0xA3},
	{0xA39E,0xED},
	{0xA39F,0xF0},
	{0xA3A0,0x80},
	{0xA3A1,0x0E},
	{0xA3A2,0xE9},
	{0xA3A3,0x7E},
	{0xA3A4,0x00},
	{0xA3A5,0x2B},
	{0xA3A6,0xFF},
	{0xA3A7,0xEE},
	{0xA3A8,0x3A},
	{0xA3A9,0x90},
	{0xA3AA,0x06},
	{0xA3AB,0xD5},
	{0xA3AC,0xF0},
	{0xA3AD,0xA3},
	{0xA3AE,0xEF},
	{0xA3AF,0xF0},
	{0xA3B0,0xE9},
	{0xA3B1,0xFB},
	{0xA3B2,0x7A},
	{0xA3B3,0x00},
	{0xA3B4,0x90},
	{0xA3B5,0x0E},
	{0xA3B6,0x15},
	{0xA3B7,0xE0},
	{0xA3B8,0x2B},
	{0xA3B9,0xFE},
	{0xA3BA,0x90},
	{0xA3BB,0x0E},
	{0xA3BC,0x14},
	{0xA3BD,0xE0},
	{0xA3BE,0x3A},
	{0xA3BF,0x90},
	{0xA3C0,0x06},
	{0xA3C1,0xE1},
	{0xA3C2,0xF0},
	{0xA3C3,0xA3},
	{0xA3C4,0xCE},
	{0xA3C5,0xF0},
	{0xA3C6,0xC3},
	{0xA3C7,0x90},
	{0xA3C8,0x0E},
	{0xA3C9,0x17},
	{0xA3CA,0xE0},
	{0xA3CB,0x9B},
	{0xA3CC,0xFE},
	{0xA3CD,0x90},
	{0xA3CE,0x0E},
	{0xA3CF,0x16},
	{0xA3D0,0x02},
	{0xA3D1,0x20},
	{0xA3D2,0xD5},
	{0xA3D3,0x90},
	{0xA3d4,0x0E},
	{0xA3d5,0xE4},
	{0xA3d6,0xE0},
	{0xA3d7,0x90},
	{0xA3d8,0x02},
	{0xA3d9,0x66},
	{0xA3da,0xF0},
	{0xA3DB,0x90},
	{0xA3dc,0x0E},
	{0xA3dd,0xE5},
	{0xA3de,0xE0},
	{0xA3df,0x90},
	{0xA3e0,0x02},
	{0xA3e1,0x64},
	{0xA3e2,0xF0},
	{0xA3e3,0x90},
	{0xA3e4,0x0E},
	{0xA3e5,0xE6},
	{0xA3e6,0xE0},
	{0xA3e7,0x90},
	{0xA3e8,0x02},
	{0xA3e9,0x65},
	{0xA3ea,0xF0},
	{0xA3eb,0x02},
	{0xA3ec,0x67},
	{0xA3ed,0xA5},
	{0xA3f0,0x12},
	{0xA3f1,0x47},
	{0xA3f2,0x59},
	{0xA3f3,0x90},
	{0xA3f4,0x00},
	{0xA3f5,0xB5},
	{0xA3f6,0xE0},
	{0xA3f7,0xB4},
	{0xA3f8,0x02},
	{0xA3f9,0x03},
	{0xA3fa,0x12},
	{0xA3fb,0x47},
	{0xA3fc,0x59},
	{0xA3fd,0x02},
	{0xA3fe,0xC5},
	{0xA3ff,0xC3},
	{0xA400,0x90},
	{0xA401,0x00},
	{0xA402,0x3D},
	{0xA403,0xF0},
	{0xA404,0x90},
	{0xA405,0x00},
	{0xA406,0x84},
	{0xA407,0xE0},
	{0xA408,0xFE},
	{0xA409,0x90},
	{0xA40A,0x00},
	{0xA40B,0x3E},
	{0xA40C,0xF0},
	{0xA40D,0xEF},
	{0xA40E,0x70},
	{0xA40F,0x03},
	{0xA410,0xEE},
	{0xA411,0x60},
	{0xA412,0x04},
	{0xA413,0x7F},
	{0xA414,0x01},
	{0xA415,0x80},
	{0xA416,0x02},
	{0xA417,0x7F},
	{0xA418,0x00},
	{0xA419,0x90},
	{0xA41A,0x00},
	{0xA41B,0x3F},
	{0xA41C,0xEF},
	{0xA41D,0xF0},
	{0xA41E,0x02},
	{0xA41F,0x89},
	{0xA420,0xD3},
	{0xA421,0x90},
	{0xA422,0x00},
	{0xA423,0x12},
	{0xA424,0xE0},
	{0xA425,0xFF},
	{0xA426,0x70},
	{0xA427,0x0C},
	{0xA428,0x90},
	{0xA429,0x00},
	{0xA42A,0x46},
	{0xA42B,0xE0},
	{0xA42C,0xC3},
	{0xA42D,0x94},
	{0xA42E,0x07},
	{0xA42F,0x40},
	{0xA430,0x03},
	{0xA431,0x75},
	{0xA432,0x2E},
	{0xA433,0x02},
	{0xA434,0xEF},
	{0xA435,0xB4},
	{0xA436,0x01},
	{0xA437,0x0C},
	{0xA438,0x90},
	{0xA439,0x00},
	{0xA43A,0x66},
	{0xA43B,0xE0},
	{0xA43C,0xC3},
	{0xA43D,0x94},
	{0xA43E,0x07},
	{0xA43F,0x40},
	{0xA440,0x03},
	{0xA441,0x75},
	{0xA442,0x2E},
	{0xA443,0x02},
	{0xA444,0x02},
	{0xA445,0xA7},
	{0xA446,0x9E},
	{0xA447,0xC3},
	{0xA448,0x90},
	{0xA449,0x0B},
	{0xA44A,0x8F},
	{0xA44B,0xE0},
	{0xA44C,0x94},
	{0xA44D,0x80},
	{0xA44E,0x90},
	{0xA44F,0x0B},
	{0xA450,0x8E},
	{0xA451,0xE0},
	{0xA452,0x94},
	{0xA453,0x44},
	{0xA454,0x40},
	{0xA455,0x22},
	{0xA456,0x90},
	{0xA457,0x0B},
	{0xA458,0x91},
	{0xA459,0xE0},
	{0xA45A,0x94},
	{0xA45B,0x80},
	{0xA45C,0x90},
	{0xA45D,0x0B},
	{0xA45E,0x90},
	{0xA45F,0xE0},
	{0xA460,0x94},
	{0xA461,0x44},
	{0xA462,0x40},
	{0xA463,0x14},
	{0xA464,0x90},
	{0xA465,0x0B},
	{0xA466,0x93},
	{0xA467,0xE0},
	{0xA468,0x94},
	{0xA469,0x80},
	{0xA46A,0x90},
	{0xA46B,0x0B},
	{0xA46C,0x92},
	{0xA46D,0xE0},
	{0xA46E,0x94},
	{0xA46F,0x44},
	{0xA470,0x40},
	{0xA471,0x06},
	{0xA472,0x90},
	{0xA473,0x01},
	{0xA474,0xA4},
	{0xA475,0x02},
	{0xA476,0x86},
	{0xA477,0x57},
	{0xA478,0x02},
	{0xA479,0x86},
	{0xA47A,0x5C},
	{0xA500,0xF5},
	{0xA501,0x3B},
	{0xA502,0x90},
	{0xA503,0x06},
	{0xA504,0x6C},
	{0xA505,0xE0},
	{0xA506,0xFF},
	{0xA507,0xE5},
	{0xA508,0x3B},
	{0xA509,0xC3},
	{0xA50A,0x9F},
	{0xA50B,0x40},
	{0xA50C,0x03},
	{0xA50D,0x02},
	{0xA50E,0xF6},
	{0xA50F,0x0E},
	{0xA510,0x90},
	{0xA511,0x0B},
	{0xA512,0xC6},
	{0xA513,0xE0},
	{0xA514,0x14},
	{0xA515,0x60},
	{0xA516,0x3C},
	{0xA517,0x14},
	{0xA518,0x60},
	{0xA519,0x6B},
	{0xA51A,0x24},
	{0xA51B,0x02},
	{0xA51C,0x60},
	{0xA51D,0x03},
	{0xA51E,0x02},
	{0xA51F,0xF5},
	{0xA520,0xB5},
	{0xA521,0x90},
	{0xA522,0x0A},
	{0xA523,0x9A},
	{0xA524,0xE0},
	{0xA525,0xFB},
	{0xA526,0xA3},
	{0xA527,0xE0},
	{0xA528,0xFA},
	{0xA529,0xA3},
	{0xA52A,0xE0},
	{0xA52B,0xF9},
	{0xA52C,0x85},
	{0xA52D,0x3B},
	{0xA52E,0x82},
	{0xA52F,0x75},
	{0xA530,0x83},
	{0xA531,0x00},
	{0xA532,0x12},
	{0xA533,0x0A},
	{0xA534,0xB8},
	{0xA535,0xFF},
	{0xA536,0x74},
	{0xA537,0xAB},
	{0xA538,0x25},
	{0xA539,0x3B},
	{0xA53A,0xF5},
	{0xA53B,0x82},
	{0xA53C,0xE4},
	{0xA53D,0x34},
	{0xA53E,0x0A},
	{0xA53F,0xF5},
	{0xA540,0x83},
	{0xA541,0xE0},
	{0xA542,0xFD},
	{0xA543,0xC3},
	{0xA544,0xEF},
	{0xA545,0x9D},
	{0xA546,0xFE},
	{0xA547,0xE4},
	{0xA548,0x94},
	{0xA549,0x00},
	{0xA54A,0x90},
	{0xA54B,0x0B},
	{0xA54C,0xCA},
	{0xA54D,0xF0},
	{0xA54E,0xA3},
	{0xA54F,0xCE},
	{0xA550,0xF0},
	{0xA551,0x80},
	{0xA552,0x62},
	{0xA553,0x90},
	{0xA554,0x0A},
	{0xA555,0x9A},
	{0xA556,0xE0},
	{0xA557,0xFB},
	{0xA558,0xA3},
	{0xA559,0xE0},
	{0xA55A,0xFA},
	{0xA55B,0xA3},
	{0xA55C,0xE0},
	{0xA55D,0xF9},
	{0xA55E,0x85},
	{0xA55F,0x3B},
	{0xA560,0x82},
	{0xA561,0x75},
	{0xA562,0x83},
	{0xA563,0x00},
	{0xA564,0x12},
	{0xA565,0x0A},
	{0xA566,0xB8},
	{0xA567,0xFF},
	{0xA568,0x74},
	{0xA569,0x9D},
	{0xA56A,0x25},
	{0xA56B,0x3B},
	{0xA56C,0xF5},
	{0xA56D,0x82},
	{0xA56E,0xE4},
	{0xA56F,0x34},
	{0xA570,0x0A},
	{0xA571,0xF5},
	{0xA572,0x83},
	{0xA573,0xE0},
	{0xA574,0xFD},
	{0xA575,0xC3},
	{0xA576,0xEF},
	{0xA577,0x9D},
	{0xA578,0xFE},
	{0xA579,0xE4},
	{0xA57A,0x94},
	{0xA57B,0x00},
	{0xA57C,0x90},
	{0xA57D,0x0B},
	{0xA57E,0xCA},
	{0xA57F,0xF0},
	{0xA580,0xA3},
	{0xA581,0xCE},
	{0xA582,0xF0},
	{0xA583,0x80},
	{0xA584,0x30},
	{0xA585,0x90},
	{0xA586,0x0A},
	{0xA587,0x9A},
	{0xA588,0xE0},
	{0xA589,0xFB},
	{0xA58A,0xA3},
	{0xA58B,0xE0},
	{0xA58C,0xFA},
	{0xA58D,0xA3},
	{0xA58E,0xE0},
	{0xA58F,0xF9},
	{0xA590,0x85},
	{0xA591,0x3B},
	{0xA592,0x82},
	{0xA593,0x75},
	{0xA594,0x83},
	{0xA595,0x00},
	{0xA596,0x12},
	{0xA597,0x0A},
	{0xA598,0xB8},
	{0xA599,0xFF},
	{0xA59A,0x74},
	{0xA59B,0xA4},
	{0xA59C,0x25},
	{0xA59D,0x3B},
	{0xA59E,0xF5},
	{0xA59F,0x82},
	{0xA5A0,0xE4},
	{0xA5A1,0x34},
	{0xA5A2,0x0A},
	{0xA5A3,0xF5},
	{0xA5A4,0x83},
	{0xA5A5,0xE0},
	{0xA5A6,0xFD},
	{0xA5A7,0xC3},
	{0xA5A8,0xEF},
	{0xA5A9,0x9D},
	{0xA5AA,0xFE},
	{0xA5AB,0xE4},
	{0xA5AC,0x94},
	{0xA5AD,0x00},
	{0xA5AE,0x90},
	{0xA5AF,0x0B},
	{0xA5B0,0xCA},
	{0xA5B1,0xF0},
	{0xA5B2,0xA3},
	{0xA5B3,0xCE},
	{0xA5B4,0xF0},
	{0xA5B5,0x90},
	{0xA5B6,0x07},
	{0xA5B7,0x83},
	{0xA5B8,0xE0},
	{0xA5B9,0xFF},
	{0xA5BA,0x7E},
	{0xA5BB,0x00},
	{0xA5BC,0x90},
	{0xA5BD,0x0D},
	{0xA5BE,0xF6},
	{0xA5BF,0xEE},
	{0xA5C0,0xF0},
	{0xA5C1,0xA3},
	{0xA5C2,0xEF},
	{0xA5C3,0xF0},
	{0xA5C4,0x90},
	{0xA5C5,0x0B},
	{0xA5C6,0xCA},
	{0xA5C7,0xE0},
	{0xA5C8,0xFC},
	{0xA5C9,0xA3},
	{0xA5CA,0xE0},
	{0xA5CB,0xFD},
	{0xA5CC,0xD3},
	{0xA5CD,0x9F},
	{0xA5CE,0x74},
	{0xA5CF,0x80},
	{0xA5D0,0xF8},
	{0xA5D1,0xEC},
	{0xA5D2,0x64},
	{0xA5D3,0x80},
	{0xA5D4,0x98},
	{0xA5D5,0x40},
	{0xA5D6,0x0C},
	{0xA5D7,0x90},
	{0xA5D8,0x0B},
	{0xA5D9,0xC8},
	{0xA5DA,0xE0},
	{0xA5DB,0x04},
	{0xA5DC,0xF0},
	{0xA5DD,0xA3},
	{0xA5DE,0xE0},
	{0xA5DF,0x04},
	{0xA5E0,0xF0},
	{0xA5E1,0x80},
	{0xA5E2,0x26},
	{0xA5E3,0x90},
	{0xA5E4,0x0D},
	{0xA5E5,0xF6},
	{0xA5E6,0xE0},
	{0xA5E7,0xFE},
	{0xA5E8,0xA3},
	{0xA5E9,0xE0},
	{0xA5EA,0xFF},
	{0xA5EB,0xC3},
	{0xA5EC,0xE4},
	{0xA5ED,0x9F},
	{0xA5EE,0xFF},
	{0xA5EF,0xE4},
	{0xA5F0,0x9E},
	{0xA5F1,0xFE},
	{0xA5F2,0xC3},
	{0xA5F3,0xED},
	{0xA5F4,0x9F},
	{0xA5F5,0xEE},
	{0xA5F6,0x64},
	{0xA5F7,0x80},
	{0xA5F8,0xF8},
	{0xA5F9,0xEC},
	{0xA5FA,0x64},
	{0xA5FB,0x80},
	{0xA5FC,0x98},
	{0xA5FD,0x50},
	{0xA5FE,0x0A},
	{0xA5FF,0x90},
	{0xA600,0x0B},
	{0xA601,0xC8},
	{0xA602,0xE0},
	{0xA603,0x14},
	{0xA604,0xF0},
	{0xA605,0xA3},
	{0xA606,0xE0},
	{0xA607,0x04},
	{0xA608,0xF0},
	{0xA609,0x05},
	{0xA60A,0x3B},
	{0xA60B,0x02},
	{0xA60C,0xF5},
	{0xA60D,0x02},
	{0xA60E,0x90},
	{0xA60F,0x08},
	{0xA610,0x58},
	{0xA611,0x02},
	{0xA612,0x9D},
	{0xA613,0x50},
	{0x9006,0xBA},
	{0x9007,0x75},
	{0x9008,0x00},
	{0x9009,0x00},
	{0x900A,0x02},
	{0x900D,0x01},
	{0x900E,0xA2},
	{0x900F,0x8F},
	{0x9010,0x00},
	{0x9011,0xCB},
	{0x9012,0x03},
	{0x9016,0xE6},
	{0x9017,0x6B},
	{0x9018,0x02},
	{0x9019,0x6B},
	{0x901A,0x02},
	{0x901D,0x01},
	{0x901E,0xAC},
	{0x901F,0x70},
	{0x9020,0x00},
	{0x9021,0xC5},
	{0x9022,0x03},
	{0x9026,0x9C},
	{0x9027,0x5B},
	{0x9028,0x00},
	{0x9029,0xBF},
	{0x902A,0x02},
	{0x902E,0x60},
	{0x902F,0x1C},
	{0x9030,0x01},
	{0x9031,0x37},
	{0x9032,0x02},
	{0x9035,0x01},
	{0x9036,0xBA},
	{0x9037,0x70},
	{0x9038,0x00},
	{0x9039,0x00},
	{0x903A,0x03},
	{0x903E,0x21},
	{0x903F,0x3F},
	{0x9040,0x02},
	{0x9041,0x40},
	{0x9042,0x02},
	{0x9046,0x21},
	{0x9047,0xEA},
	{0x9048,0x02},
	{0x9049,0x43},
	{0x904A,0x02},
	{0x904E,0xA6},
	{0x904F,0x12},
	{0x9050,0x02},
	{0x9051,0x46},
	{0x9052,0x02},
	{0x9056,0x29},
	{0x9057,0xE3},
	{0x9058,0x02},
	{0x9059,0x49},
	{0x905A,0x02},
	{0x905D,0x01},
	{0x905E,0x9C},
	{0x905F,0x6E},
	{0x9060,0x05},
	{0x9061,0x00},
	{0x9062,0x02},
	{0x9065,0x01},
	{0x9066,0xA2},
	{0x9067,0x66},
	{0x9068,0x02},
	{0x9069,0x35},
	{0x906A,0x02},
	{0x906D,0x01},
	{0x906E,0xB5},
	{0x906F,0xC2},
	{0x9070,0x02},
	{0x9071,0x9B},
	{0x9072,0x02},
	{0x9075,0x01},
	{0x9076,0xA2},
	{0x9077,0xD4},
	{0x9078,0x02},
	{0x9079,0xBE},
	{0x907A,0x02},
	{0x907D,0x01},
	{0x907E,0xB7},
	{0x907F,0xEA},
	{0x9080,0x00},
	{0x9081,0x02},
	{0x9082,0x03},
	{0x9086,0x67},
	{0x9087,0x31},
	{0x9088,0x02},
	{0x9089,0xF7},
	{0x908A,0x02},
	{0x908E,0x66},
	{0x908F,0xED},
	{0x9090,0x03},
	{0x9091,0x1D},
	{0x9092,0x02},
	{0x9096,0x67},
	{0x9097,0x73},
	{0x9098,0x03},
	{0x9099,0xD3},
	{0x909A,0x02},
	{0x909E,0x20},
	{0x909F,0x40},
	{0x90A0,0x03},
	{0x90A1,0x3B},
	{0x90A2,0x02},
	{0x90A6,0xC5},
	{0x90A7,0xC0},
	{0x90A8,0x03},
	{0x90A9,0xF0},
	{0x90AA,0x02},
	{0x90AE,0x41},
	{0x90AF,0xB3},
	{0x90B0,0x00},
	{0x90B1,0xA2},
	{0x90B2,0x02},
	{0x90B6,0x44},
	{0x90B7,0xBA},
	{0x90B8,0x00},
	{0x90B9,0xF0},
	{0x90BA,0x03},
	{0x90BE,0x89},
	{0x90BF,0x99},
	{0x90C0,0x04},
	{0x90C1,0x00},
	{0x90C2,0x02},
	{0x90C6,0xA7},
	{0x90C7,0x91},
	{0x90C8,0x04},
	{0x90C9,0x21},
	{0x90CA,0x02},
	{0x90CE,0x3A},
	{0x90CF,0x51},
	{0x90D0,0x00},
	{0x90D1,0xA2},
	{0x90D2,0x02},
	{0x90D6,0x86},
	{0x90D7,0x54},
	{0x90D8,0x04},
	{0x90D9,0x47},
	{0x90DA,0x02},
	{0x9000,0x01},
	{0xffff,0x00},
	{HM5065_REG_DELAY,200},

	{0x0009,0x17}, 	//	MCLK=26Mhz ,
	{0x0085,0x02}, 	//	Reg0x0085=0x00(CbYCrY - sequence)for MTK 0:uyvy 2: yuyv
	{0x0040,0x00}, 	//	binning mode and subsampling mode for frame rate
	{0x0016,0x00}, 	//	Parallel(00) mode or mipi/1 lane(01) /2 lanes(02)
	{0x0046,0x00}, 	//	data format (RGB/YUV/JPEG)
	{0x0041,0x00}, 	//	04 : VGA mode : 0A : self define ; 00 : 5M
	{0x0042,0x0A}, 	//	X:1298 --> 800 ->2592
	{0x0043,0x20}, 	//
	{0x0044,0x07}, 	//	Y:972 -->	600->1944
	{0x0045,0x98}, 	//
	{0x00B5,0x01}, 	//PLL Divider3 //02kai
	{0x7101,0xC4},
	{0x00E8,0x01},//AFR
	{0x00ED,0x0c},//Min.Frame Rate
	{0x00EE,0x1E},//Max.Framte Rate=30fps
	{0x00B2,0x50},//4e   //50//set PLL output 560MHz
	{0x00B3,0x80},//30->80
	{0x7104,0x02},
	{0x7105,0x00},
	{0x019C,0x4B},
	{0x019D,0x20},
	{0x0129,0x00},//00:Flat  meter 02:center meter
	{0x0130,0x00},//00(0EV)->FF(-0.2EV)
	{0x0083,0x01},//0x01
	{0x0084,0x01},//0x01
	{0x01A1,0x80},
	{0x01A2,0x80},
	{0x01A3,0x80},
	{0x01A0,0x01},
	{0x0021,0x00},
	{0x0022,0x01},
	{0x0060,0x00},
	{0x0013,0x00},
	{0x0061,0x00},
	{0x0066,0x02},
	{0x0012,0x00},
	{0x7102,0x09},  //default 01 ; 09 : for clear Hsync gating
	{0x7103,0x00},
	{0x7158,0x00},
	{0x7000,0x2C},
	{0x5200,0x01},
	{0x7000,0x0C},
	{0x02C2,0x00},//Max Again 00E0=8x,0080=2x,  00C0=4x
	{0x02C3,0xA0},//C0 By Zeroy
	{0x015E,0x41},//Max Dgain 4100=3x ,4000=2x, 3E00=1x
	{0x015F,0x00},
	{0x0390,0x01},
	{0x0391,0x00},
	{0x0392,0x00},
	{0x03A0,0x14},
	{0x03A1,0x00},
	{0x03A2,0x5A},
	{0x03A3,0xEE},
	{0x03A4,0x69},
	{0x03A5,0x49},
	{0x03A6,0x3E},
	{0x03A7,0x00},
	{0x03A8,0x39},
	{0x03A9,0x33},
	{0x03B0,0x60},
	{0x03B1,0x00},
	{0x03B2,0x5A},
	{0x03B3,0xEE},
	{0x03B4,0x69},
	{0x03B5,0x49},
	{0x03B6,0x3E},
	{0x03B7,0x00},
	{0x03B8,0x3D},
	{0x03B9,0x20},
	{0x03C0,0x10},
	{0x03C1,0x00},
	{0x03C2,0x5A},
	{0x03C3,0xEE},
	{0x03C4,0x69},
	{0x03C5,0x49},
	{0x03C6,0x3A},
	{0x03C7,0x80},
	{0x03D0,0x64},
	{0x03D1,0x00},
	{0x03D2,0x5A},
	{0x03D3,0xEE},
	{0x03D4,0x69},
	{0x03D5,0x49},
	{0x03D6,0x34},
	{0x03D7,0xD1},
	{0x004C,0x10},//08-0A-10
	{0x006C,0x08},
	{0x0350,0x00},
	{0x0351,0x5A},
	{0x0352,0xEE},
	{0x0353,0x69},
	{0x0354,0x49},
	{0x0355,0x39},
	{0x0356,0x6D},
	{0x0357,0x19},//19
	{0x0358,0x00},
	{0x0359,0x3C},
	{0x035A,0x5A},
	{0x035B,0xEE},
	{0x035C,0x69},
	{0x035D,0x49},
	{0x035E,0x39},
	{0x035F,0x85},
	{0x0049,0x14},
	{0x004A,0x0D},
	{0x0069,0x14},
	{0x006A,0x0D},
	{0x0090,0x5A},
	{0x0091,0xEE},
	{0x0092,0x3E},
	{0x0093,0x00},
	{0x0094,0x69},
	{0x0095,0x49},
	{0x0096,0x39},
	{0x0097,0xCF},
	{0x0098,0x00},	//CF BY Zeroy
	{0x00A0,0x5A},
	{0x00A1,0xEE},
	{0x00A2,0x3E},
	{0x00A3,0x00},
	{0x00A4,0x69},
	{0x00A5,0x49},
	{0x00A6,0x3B},
	{0x00A7,0x80},
	{0x00A8,0x00},		
	{0x0420,0x00},
	{0x0421,0x26},
	{0x0422,0xff},
	{0x0423,0x03},
	{0x0424,0x00},
	{0x0425,0x63},
	{0x0426,0x00},
	{0x0427,0x8e},
	{0x0428,0xff},
	{0x0429,0xf3},
	{0x042A,0x00},
	{0x042B,0x26},
	{0x042C,0xff},
	{0x042D,0xc8},
	{0x042E,0xff},
	{0x042F,0x5f},
	{0x0430,0x00},
	{0x0431,0x10},
	{0x0432,0xfe},
	{0x0433,0xcf},
	{0x0434,0x00},
	{0x0435,0xc2},
	{0x0436,0x00},
	{0x0437,0xf2},
	{0x0438,0xff},
	{0x0439,0xd0},
	{0x043A,0x00},
	{0x043B,0xa1},
	{0x043C,0x00},
	{0x043D,0x2f},
	{0x043E,0xfe},
	{0x043F,0xdc},
	{0x0450,0x00},
	{0x0451,0x36},
	{0x0452,0xff},
	{0x0453,0x60},
	{0x0454,0x00},
	{0x0455,0x43},
	{0x0456,0x00},
	{0x0457,0x6b},
	{0x0458,0xff},
	{0x0459,0xdf},
	{0x045A,0x00},
	{0x045B,0x83},
	{0x045C,0xff},
	{0x045D,0xeb},
	{0x045E,0xff},
	{0x045F,0x5f},
	{0x0440,0x00},
	{0x0441,0x36},
	{0x0442,0xff},
	{0x0443,0x3e},
	{0x0444,0x00},
	{0x0445,0x6d},
	{0x0446,0x00},
	{0x0447,0x87},
	{0x0448,0x00},
	{0x0449,0x0f},
	{0x044A,0xff},
	{0x044B,0xd3},
	{0x044C,0x00},
	{0x044D,0x18},
	{0x044E,0xff},
	{0x044F,0x4f},
	{0x0561,0x08},
	{0x0460,0x00},
	{0x0461,0x22},
	{0x0462,0xff},
	{0x0463,0x0a},
	{0x0464,0x00},
	{0x0465,0x63},
	{0x0466,0x00},
	{0x0467,0x8b},
	{0x0468,0xff},
	{0x0469,0xf9},
	{0x046A,0x00},
	{0x046B,0x17},
	{0x046C,0xff},
	{0x046D,0xbd},
	{0x046E,0xff},
	{0x046F,0x65},
	{0x0470,0x00},
	{0x0471,0x15},
	{0x0472,0xfe},
	{0x0473,0xd7},
	{0x0474,0x00},
	{0x0475,0xb6},
	{0x0476,0x00},
	{0x0477,0xe5},
	{0x0478,0xff},
	{0x0479,0xd0},
	{0x047A,0x00},
	{0x047B,0xb2},
	{0x047C,0x00},
	{0x047D,0x2c},
	{0x047E,0xfe},
	{0x047F,0xe6},
	{0x0490,0x00},
	{0x0491,0x2b},
	{0x0492,0xff},
	{0x0493,0x71},
	{0x0494,0x00},
	{0x0495,0x43},
	{0x0496,0x00},
	{0x0497,0x69},
	{0x0498,0xff},
	{0x0499,0xd7},
	{0x049A,0x00},
	{0x049B,0x59},
	{0x049C,0xff},
	{0x049D,0xde},
	{0x049E,0xff},
	{0x049F,0x76},
	{0x0480,0x00},
	{0x0481,0x38},
	{0x0482,0xff},
	{0x0483,0x3a},
	{0x0484,0x00},
	{0x0485,0x6b},
	{0x0486,0x00},
	{0x0487,0x86},
	{0x0488,0x00},
	{0x0489,0x14},
	{0x048A,0xff},
	{0x048B,0xd7},
	{0x048C,0x00},
	{0x048D,0x13},
	{0x048E,0xff},
	{0x048F,0x58},
	{0x0562,0x08},
	{0x04A0,0x00},
	{0x04A1,0x17},
	{0x04A2,0xff},
	{0x04A3,0x2e},
	{0x04A4,0x00},
	{0x04A5,0x5d},
	{0x04A6,0x00},
	{0x04A7,0x7a},
	{0x04A8,0xff},
	{0x04A9,0xf9},
	{0x04AA,0xff},
	{0x04AB,0xc0},
	{0x04AC,0xff},
	{0x04AD,0xc7},
	{0x04AE,0xff},
	{0x04AF,0x7d},
	{0x04B0,0x00},
	{0x04B1,0x13},
	{0x04B2,0xff},
	{0x04B3,0x45},
	{0x04B4,0x00},
	{0x04B5,0x70},
	{0x04B6,0x00},
	{0x04B7,0x96},
	{0x04B8,0xff},
	{0x04B9,0xde},
	{0x04BA,0x00},
	{0x04BB,0x17},
	{0x04BC,0x00},
	{0x04BD,0x23},
	{0x04BE,0xff},
	{0x04BF,0x46},
	{0x04D0,0x00},
	{0x04D1,0x17},
	{0x04D2,0xff},
	{0x04D3,0x99},
	{0x04D4,0x00},
	{0x04D5,0x3d},
	{0x04D6,0x00},
	{0x04D7,0x5f},
	{0x04D8,0xff},
	{0x04D9,0xd1},
	{0x04DA,0xff},
	{0x04DB,0xe2},
	{0x04DC,0xff},
	{0x04DD,0xc6},
	{0x04DE,0xff},
	{0x04DF,0x9c},
	{0x04C0,0x00},
	{0x04C1,0x32},
	{0x04C2,0xff},
	{0x04C3,0x4e},
	{0x04C4,0x00},
	{0x04C5,0x5e},
	{0x04C6,0x00},
	{0x04C7,0x7c},
	{0x04C8,0x00},
	{0x04C9,0x17},
	{0x04CA,0xff},
	{0x04CB,0x9b},
	{0x04CC,0x00},
	{0x04CD,0x06},
	{0x04CE,0xff},
	{0x04CF,0x70},
	{0x0563,0x05},
	{0x04E0,0x00},
	{0x04E1,0x11},
	{0x04E2,0xff},
	{0x04E3,0x20},
	{0x04E4,0x00},
	{0x04E5,0x5f},
	{0x04E6,0x00},
	{0x04E7,0x7b},
	{0x04E8,0x00},
	{0x04E9,0x02},
	{0x04EA,0xff},
	{0x04EB,0xf1},
	{0x04EC,0xff},
	{0x04ED,0xb7},
	{0x04EE,0xff},
	{0x04EF,0x7b},
	{0x04F0,0x00},
	{0x04F1,0x1c},
	{0x04F2,0xff},
	{0x04F3,0x08},
	{0x04F4,0x00},
	{0x04F5,0x80},//7e//A0/90
	{0x04F6,0x00},
	{0x04F7,0xB0},//AC/B8
	{0x04F8,0xff},
	{0x04F9,0xeb},
	{0x04FA,0x00},
	{0x04FB,0x93},
	{0x04FC,0x00},
	{0x04FD,0x1b},
	{0x04FE,0xff},
	{0x04FF,0x11},
	{0x0510,0xff},
	{0x0511,0xfe},
	{0x0512,0xff},
	{0x0513,0x8e},
	{0x0514,0x00},
	{0x0515,0x4a},
	{0x0516,0x00},
	{0x0517,0x6e},
	{0x0518,0xff},
	{0x0519,0xbb},
	{0x051A,0xff},
	{0x051B,0xcc},
	{0x051C,0xff},
	{0x051D,0x9a},
	{0x051E,0xff},
	{0x051F,0xa2},
	{0x0500,0x00},
	{0x0501,0x30},
	{0x0502,0xff},
	{0x0503,0x36},
	{0x0504,0x00},
	{0x0505,0x5d},
	{0x0506,0x00},
	{0x0507,0x81},
	{0x0508,0x00},
	{0x0509,0x1f},
	{0x050A,0xff},
	{0x050B,0xd4},
	{0x050C,0xff},
	{0x050D,0xfe},
	{0x050E,0xff},
	{0x050F,0x75},
	{0x0564,0x00},
	{0x0324,0x39},
	{0x0325,0xAE},
	{0x0326,0x3A},
	{0x0327,0x29},
	{0x0328,0x3B},
	{0x0329,0x0A},
	{0x032A,0x3B},
	{0x032B,0xAE},
	{0x0320,0x01},
	{0x0321,0x04},
	{0x0322,0x01},
	{0x0323,0x01},
	{0x0330,0xCF},
	{0x0384,0x00},
	{0x0337,0x01},
	{0x03EC,0x39},
	{0x03ED,0x85},
	{0x03FC,0x3A},
	{0x03FD,0x14},
	{0x040C,0x3A},
	{0x040D,0xF6},
	{0x041C,0x3B},
	{0x041D,0x9A},
	{0x03E0,0xB6},
	{0x03E1,0x04},
	{0x03E2,0xBB},
	{0x03E3,0xE9},
	{0x03E4,0xBC},
	{0x03E5,0x70},
	{0x03E6,0x37},
	{0x03E7,0x02},
	{0x03E8,0xBC},
	{0x03E9,0x00},
	{0x03EA,0xBF},
	{0x03EB,0x12},
	{0x03F0,0xBA},
	{0x03F1,0x7B},
	{0x03F2,0xBA},
	{0x03F3,0x83},
	{0x03F4,0xBB},
	{0x03F5,0xBC},
	{0x03F6,0x38},
	{0x03F7,0x2D},
	{0x03F8,0xBB},
	{0x03F9,0x23},
	{0x03FA,0xBD},
	{0x03FB,0xAC},
	{0x0400,0xBE},
	{0x0401,0x96},
	{0x0402,0xB9},
	{0x0403,0xBE},
	{0x0404,0xBB},
	{0x0405,0x57},
	{0x0406,0x3A},
	{0x0407,0xBB},
	{0x0408,0xB3},
	{0x0409,0x17},
	{0x040A,0xBE},
	{0x040B,0x66},
	{0x0410,0xBB},
	{0x0411,0x2A},
	{0x0412,0xBA},
	{0x0413,0x00},
	{0x0414,0xBB},
	{0x0415,0x10},
	{0x0416,0xB8},
	{0x0417,0xCD},
	{0x0418,0xB7},
	{0x0419,0x5C},
	{0x041A,0xBB},
	{0x041B,0x6C},
	{0x01f8,0x3c},
	{0x01f9,0x00},
	{0x01fa,0x00},
	{0x02a2,0x3e},
	{0x02a3,0x00},
	{0x02a4,0x3e},
	{0x02a5,0x00},
	{0x02a6,0x3e},
	{0x02a7,0x00},
	{0x02a8,0x3f},
	{0x02a9,0x66},
	{0x056c,0x42},
	{0x056d,0x00},
	{0x056e,0x42},
	{0x056f,0x00},
	{0x0570,0x42},
	{0x0571,0x00},
	{0x0572,0x42},//42->41
	{0x0573,0x00},//00->E6
	{0x0081,0x68}, //	;Saturation 0x7A->0x70
	{0x0588,0x00}, //	;ColourSaturationDamper fDisable {CompiledExposureTime}
	{0x0589,0x5A}, //	;ColourSaturationDamper fpLowThreshold {MSB}
	{0x058A,0xEE}, //	;ColourSaturationDamper fpLowThreshold {LSB}
	{0x058B,0x69}, //	;ColourSaturationDamper fpHighThreshold {MSB}
	{0x058C,0x49}, //	;ColourSaturationDamper fpHighThreshold {LSB}
	{0x058D,0x3b}, //	;ColourSaturationDamper fpMinimumOutput {MSB}3d->3b
	{0x058E,0x33}, //	;ColourSaturationDamper fpMinimumOutput {LSB}3d->33
	{0x0080,0x58}, //	;Set Contrast 6A->68->60
	{0x0082,0x5A}, //	;Set Brightness

	{0x4708,0x00}, //Set horizontal and vertical offsets to zero
	{0x4709,0x00},
	{0x4710,0x00},
	{0x4711,0x00},

	// AF register optimuzation 
	{0x0658,0x00}, // 2013-01-04
	{0x0659,0x00},//01
	{0x075A,0x00},//00 ->01
	{0x0756,0x00}, //03->00,
	{0x06D5,0x01},
	{0x06D6,0xBD},//60->BC->66->BD
	{0x06D7,0x00},
	{0x06D8,0x50},//50->60
	{0x06D9,0x00},
	{0x06DA,0x50},//93->50
	{0x065A,0x00},
	{0x06C9,0x01},
	{0x06CD,0x01},
	{0x06CE,0xBD},//bd
	{0x06CF,0x00},
	{0x06D0,0x50},//93
	{0x06D1,0x02},
	{0x06D2,0x30},
	{0x06D3,0xD4},
	{0x06D4,0x01},
	{0x06DB,0x59},
	{0x06DC,0x0d},
	{0x0730,0x00},
	{0x0731,0x00},
	{0x0732,0x03},
	{0x0733,0xFF},
	{0x0734,0x03},
	{0x0735,0x70},
	{0x0755,0x01},		
	{0x075B,0x01},
	{0x075E,0x00},
	{0x0764,0x01},
	{0x0766,0x01},
	{0x0768,0x01},
	{0x076A,0x00},
	{0x0758,0x01},
	{0x075C,0x01},
	{0x0770,0x98}, // 98
	{0x0771,0x19},//19
	{0x0772,0x1B},
	{0x0774,0x01},
	{0x0775,0x4a},
	{0x0777,0x00},
	{0x0778,0x45},
	{0x0779,0x00},
	{0x077A,0x02},
	{0x077D,0x01},
	{0x077E,0x03},
	{0x0783,0x10},
	{0x0785,0x14},
	{0x0788,0x04},
	{0x0846,0x06},
	{0x0847,0x05},
	//END
	{0xC41A,0x05},
	{0xC423,0x11},
	{0xC427,0x11},
	{0x300B,0x08},

	{0x0010,0x02},
	{HM5065_REG_DELAY,200},
	{0x00B2,0x50},//4e   //50//set PLL output 560MHz
	{0x00B3,0x80},//CA
	{0x00B5,0x02},//02
	{0x0030,0x11},//Max.Derate//14kai  14->11
	{0x0143,0x5f},//Max.Int time_H	0x64->5F->61->5f
	{0x0144,0x0D},//Max.Int time_L	0x7F->0D->0D		
	{0x01D4,0x3C},//AWB step
	{0x01D5,0x00},
	{0x0010,0x01},
	{HM5065_REG_DELAY,200},

	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_fmt_yuv422[] = {
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

#ifdef  HM5065_VGA_SIZE
static struct regval_list hm5065_win_vga[] = {
	{0x0010,0x02},
	//{HM5065_REG_DELAY,200},
	{0x0142,0x00},
	{0x0040,0x01},	//	binning mode and subsampling mode for frame rate 2*2 add 2? 4?	
	{0x0041,0x04},	//	04 : VGA mode : 0A : self define ; 00 : 5M ;03:SVGA	
	{0x004C,0x08},	
	{0x0251,0x02},//BLC ON
	{0x0010,0x01},
	{HM5065_REG_DELAY,200},		
	
	{HM5065_REG_END, 0x00}, /* END MARKER */	
};
#endif

static struct regval_list hm5065_win_SXGA[] = {	
	{0x0010,0x02},
	{HM5065_REG_DELAY,50},//150
	{0x0142,0x00},
	{0x0040,0x01},	//	binning mode and subsampling mode for frame rate 2*2 add 2? 4?	
	{0x0041,0x0A},	//	04 : VGA mode : 0A : self define ; 00 : 5M ;03:SVGA	
	{0x0042,0x05},	//05	X:800 0x500=1280,0x0320=800	
	{0x0043,0x00},	//00	
	
	{0x0044,0x03},	//03	Y:600 0x03c0=960,0x0258=600	
	{0x0045,0xc0},	//c0	
	
	{0x004C,0x08},	
	{0x0251,0x02},//BLC ON	
	{0x0010, 0x01},//Stream on
	{HM5065_REG_DELAY,100},//200

	{HM5065_REG_END, 0x00}, /* END MARKER */	
};	


static struct regval_list hm5065_win_5M[] = {	
	{0x0010, 0x02},
	{HM5065_REG_DELAY,150},//50
	{0x00B2,0x4f},//4e   //50//
	{0x00B3,0x20},//30->80//4f20//4e80//50c9
	{0x00B5,0x02},// 02-->01
	{0x0030,0x11}, 

	{0x0142,0x01},
	{0x0040,0x00}, //Full size
	{0x0041,0x00}, //00:full size
	//{0x0042,0x0A}, //X:2592/2602
	//{0x0043,0x20},
	//{0x0044,0x07}, //Y:1944/1954
	//{0x0045,0x98},
	{0x0251,0x01},//BLC off
	{0x0010,0x01},//Stream on
	{HM5065_REG_DELAY,200},//100
	{HM5065_REG_END, 0x00}, /* END MARKER */
};


static struct regval_list hm5065_stream_on[] = {
	{0x0010,0x01},//Stream on
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_stream_off[] = {
	{0x0010,0x00},//Stream off
	{HM5065_REG_END, 0x00},	/* END MARKER */
};


static struct regval_list hm5065_brightness_l3[] = {
	{0x0082,0x34},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_brightness_l2[] = {
	{0x0082,0x44},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_brightness_l1[] = {
	{0x0082,0x54},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_brightness_h0[] = {
	{0x0082,0x64},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_brightness_h1[] = {
	{0x0082,0x74},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_brightness_h2[] = {
	{0x0082,0x84},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_brightness_h3[] = {
	{0x0082,0x94},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_l3[] = {
	{0x0080,0x34},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_l2[] = {
	{0x0080,0x44},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_l1[] = {
	{0x0080,0x54},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_h0[] = {
	{0x0080,0x64},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_h1[] = {
	{0x0080,0x74},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_h2[] = {
	{0x0082,0x84},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static struct regval_list hm5065_contrast_h3[] = {
	{0x0082,0x94},
	{HM5065_REG_END, 0x00},	/* END MARKER */
};

static int hm5065_read(struct v4l2_subdev *sd, unsigned short reg,
		unsigned char *value)
{
	struct i2c_client *client = v4l2_get_subdevdata(sd);
	unsigned char buf[2] = {reg >> 8, reg & 0xff};
	struct i2c_msg msg[2] = {
		[0] = {
			.addr	= client->addr,
			.flags	= 0,
			.len	= 2,
			.buf	= buf,
		},
		[1] = {
			.addr	= client->addr,
			.flags	= I2C_M_RD,
			.len	= 1,
			.buf	= value,
		}
	};
	int ret;
	
	ret = i2c_transfer(client->adapter, msg, 2);
	if (ret > 0)
		ret = 0;

	return ret;
}

static int hm5065_write(struct v4l2_subdev *sd, unsigned short reg,
		unsigned char value)
{
	struct i2c_client *client = v4l2_get_subdevdata(sd);
	unsigned char buf[3] = {reg >> 8, reg & 0xff, value};
	struct i2c_msg msg = {
		.addr	= client->addr,
		.flags	= 0,
		.len	= 3,
		.buf	= buf,
	};
	int ret;

	ret = i2c_transfer(client->adapter, &msg, 1);
	if (ret > 0)
		ret = 0;

	return ret;
}

static int hm5065_write_array(struct v4l2_subdev *sd, struct regval_list *vals)
{
	int ret=0;
 	while (vals->reg_num != HM5065_REG_END) {
		if (vals->reg_num == HM5065_REG_DELAY) {
			if (vals->value >= (1000 / HZ))
				msleep(vals->value);
			else
				mdelay(vals->value);
		}
		ret= hm5065_write(sd, vals->reg_num, vals->value);
		if (ret < 0)
			return ret;
		vals++;
	}
	return 0;
}

#ifdef HM5065_DEBUG_FUNC
static int hm5065_read_array(struct v4l2_subdev *sd, struct regval_list *vals)
{
	int ret;
	unsigned char tmpv;
/
	while (vals->reg_num != HM5065_REG_END) {
			if (vals->reg_num == HM5065_REG_DELAY) {
			if (vals->value >= (1000 / HZ))
				msleep(vals->value);
			else
				mdelay(vals->value);
		} else {
			
			ret = hm5065_read(sd, vals->reg_num, &tmpv);
			if (ret < 0)
				return ret;
			printk("reg=0x%2x, val=0x%2x\n",vals->reg_num, tmpv );
		}
		vals++;
	}
	return 0;
}
#endif


static int hm5065_reset(struct v4l2_subdev *sd, u32 val)
{
	return 0;
}

static int hm5065_init(struct v4l2_subdev *sd, u32 val)
{
	struct hm5065_info *info = container_of(sd, struct hm5065_info, sd);

	info->fmt = NULL;
	info->win = NULL;
	info->brightness = 0;
	info->contrast = 0;
	info->frame_rate = 0;
	
	return hm5065_write_array(sd, hm5065_init_regs);
}

static int hm5065_shutter(struct v4l2_subdev *sd)
{
	int ret;
	unsigned char v1, v2 ;
	unsigned short v;
	
	ret = hm5065_read(sd, 0x17c, &v1);
	if (ret < 0)
		return ret;
	ret = hm5065_read(sd, 0x17d, &v2);
	if (ret < 0)
		return ret; 
		
	v =  (v1<<8) | v2	 ;
		v = v / 2;
	hm5065_write(sd, 0x17c, (v >> 8)&0xff ); /* Shutter */
  	hm5065_write(sd, 0x17d, v&0xff);
  //     msleep(400);
	return  0;
}

static int hm5065_detect(struct v4l2_subdev *sd)
{
	unsigned char v=0x0;
	int ret;

	ret = hm5065_read(sd, 0x0000, &v);
	printk("HM5065_CHIP_ID_H = %2x\n",v);
	if (ret < 0)
		return ret;
	if (v != HM5065_CHIP_ID_H)
		return -ENODEV;
	ret = hm5065_read(sd, 0x0001, &v);
	printk("HM5065_CHIP_ID_L = %2x\n",v);
	if (ret < 0)
		return ret;
	if (v != HM5065_CHIP_ID_L)
		return -ENODEV;
	return 0;
}

static struct hm5065_format_struct {
	enum v4l2_mbus_pixelcode mbus_code;
	enum v4l2_colorspace colorspace;
	struct regval_list *regs;
} hm5065_formats[] = {
	{
		.mbus_code	= V4L2_MBUS_FMT_YUYV8_2X8,
		.colorspace	= V4L2_COLORSPACE_JPEG,
		.regs 		= hm5065_fmt_yuv422,
	},
};
#define N_HM5065_FMTS ARRAY_SIZE(hm5065_formats)

static struct hm5065_win_size {
	int	width;
	int	height;
	struct regval_list *regs;
} hm5065_win_sizes[] = {
	/* VGA */
#ifdef  HM5065_VGA_SIZE
	{
		.width		= VGA_WIDTH,
		.height		= VGA_HEIGHT,
		.regs 		= hm5065_win_vga,
	},
#endif
	/* SXGA */
	{
		.width		= SXGA_WIDTH,
		.height		= SXGA_HEIGHT,
		.regs 		= hm5065_win_SXGA,
	},
	/* MAX */
	{
		.width		= MAX_WIDTH,
		.height		= MAX_HEIGHT,
		.regs 		= hm5065_win_5M,
	},
};
#define N_WIN_SIZES (ARRAY_SIZE(hm5065_win_sizes))

static int hm5065_enum_mbus_fmt(struct v4l2_subdev *sd, unsigned index,
					enum v4l2_mbus_pixelcode *code)
{
	if (index >= N_HM5065_FMTS)
		return -EINVAL;

	*code = hm5065_formats[index].mbus_code;
	return 0;
}

static int hm5065_try_fmt_internal(struct v4l2_subdev *sd,
		struct v4l2_mbus_framefmt *fmt,
		struct hm5065_format_struct **ret_fmt,
		struct hm5065_win_size **ret_wsize)
{
	int index;
	struct hm5065_win_size *wsize;

	for (index = 0; index < N_HM5065_FMTS; index++)
		if (hm5065_formats[index].mbus_code == fmt->code)
			break;
	if (index >= N_HM5065_FMTS) {
		/* default to first format */
		index = 0;
		fmt->code = hm5065_formats[0].mbus_code;
	}
	if (ret_fmt != NULL)
		*ret_fmt = hm5065_formats + index;

	fmt->field = V4L2_FIELD_NONE;

	for (wsize = hm5065_win_sizes; wsize < hm5065_win_sizes + N_WIN_SIZES;
	     wsize++)
		if (fmt->width <= wsize->width && fmt->height <= wsize->height)
			break;
	
	if (wsize >= hm5065_win_sizes + N_WIN_SIZES)
		wsize--;   /* Take the biggest one */
	if (ret_wsize != NULL)
		*ret_wsize = wsize;

	fmt->width = wsize->width;
	fmt->height = wsize->height;
	fmt->colorspace = hm5065_formats[index].colorspace;

	return 0;
}

static int hm5065_try_mbus_fmt(struct v4l2_subdev *sd,
			    struct v4l2_mbus_framefmt *fmt)
{
	return hm5065_try_fmt_internal(sd, fmt, NULL, NULL);
}

static int hm5065_s_mbus_fmt(struct v4l2_subdev *sd,
			  struct v4l2_mbus_framefmt *fmt)
{
	struct hm5065_info *info = container_of(sd, struct hm5065_info, sd);
	struct hm5065_format_struct *fmt_s;
	struct hm5065_win_size *wsize;
	int ret;

	ret = hm5065_try_fmt_internal(sd, fmt, &fmt_s, &wsize);
	if (ret)
		return ret;
	
	if ((info->fmt != fmt_s) && fmt_s->regs) {
		ret = hm5065_write_array(sd, fmt_s->regs);
		if (ret)
			return ret;
	}
	
	if ((info->win != wsize) && wsize->regs) {
		ret = hm5065_write_array(sd, wsize->regs);
		if (ret)
			return ret;
	}
	//this delay is used to avoid the green screen when changes to preview in 300M/200M mode
	if(wsize->regs == hm5065_win_SXGA)
		msleep(30);
	
	if (((wsize->width == MAX_WIDTH)&& (wsize->height == MAX_HEIGHT)) ||
		((wsize->width == SXGA_WIDTH)&& (wsize->height == SXGA_HEIGHT)))

		{
			ret = hm5065_shutter(sd);
		}
	printk("wsize->width=%d,wsize->height=%d\n",wsize->width,wsize->height);
	info->fmt = fmt_s;
	info->win = wsize;

	return 0;
}
static int hm5065_s_stream(struct v4l2_subdev *sd, int enable)
{
	int ret = 0;

	if (enable){
		ret = hm5065_write_array(sd, hm5065_stream_on);
		printk("Enable=%d,write_stream_on_array\n",enable);
	}
	else {
		ret = hm5065_write_array(sd, hm5065_stream_off);
		printk("Enable=%d,write_stream_off_array\n",enable);
	}
#ifdef HM5065_DEBUG_FUNC
	hm5065_read_array(sd,hm5065_init_regs );//debug only
#endif
	
	return ret;
}

static int hm5065_g_crop(struct v4l2_subdev *sd, struct v4l2_crop *a)
{
	a->c.left	= 0;
	a->c.top	= 0;
	a->c.width	= MAX_WIDTH;
	a->c.height	= MAX_HEIGHT;
	a->type		= V4L2_BUF_TYPE_VIDEO_CAPTURE;

	return 0;
}

static int hm5065_cropcap(struct v4l2_subdev *sd, struct v4l2_cropcap *a)
{
	a->bounds.left			= 0;
	a->bounds.top			= 0;
	//snapshot max size
	a->bounds.width			= MAX_WIDTH;
	a->bounds.height		= MAX_HEIGHT;
	//snapshot max size end
	a->defrect.left			= 0;
	a->defrect.top			= 0;
	//preview max size
	a->defrect.width		= MAX_PREVIEW_WIDTH;
	a->defrect.height		= MAX_PREVIEW_HEIGHT;
	//preview max size end
	a->type				= V4L2_BUF_TYPE_VIDEO_CAPTURE;
	a->pixelaspect.numerator	= 1;
	a->pixelaspect.denominator	= 1;

	return 0;
}

static int hm5065_g_parm(struct v4l2_subdev *sd, struct v4l2_streamparm *parms)
{
	return 0;
}

static int hm5065_s_parm(struct v4l2_subdev *sd, struct v4l2_streamparm *parms)
{
	return 0;
}

static int hm5065_frame_rates[] = { 30, 15, 10, 5, 1 };

static int hm5065_enum_frameintervals(struct v4l2_subdev *sd,
		struct v4l2_frmivalenum *interval)
{
	if (interval->index >= ARRAY_SIZE(hm5065_frame_rates))
		return -EINVAL;
	interval->type = V4L2_FRMIVAL_TYPE_DISCRETE;
	interval->discrete.numerator = 1;
	interval->discrete.denominator = hm5065_frame_rates[interval->index];
	return 0;
}

static int hm5065_enum_framesizes(struct v4l2_subdev *sd,
		struct v4l2_frmsizeenum *fsize)
{
	int i;
	int num_valid = -1;
	__u32 index = fsize->index;

	/*
	 * If a minimum width/height was requested, filter out the capture
	 * windows that fall outside that.
	 */
	for (i = 0; i < N_WIN_SIZES; i++) {
		struct hm5065_win_size *win = &hm5065_win_sizes[index];
		if (index == ++num_valid) {
			fsize->type = V4L2_FRMSIZE_TYPE_DISCRETE;
			fsize->discrete.width = win->width;
			fsize->discrete.height = win->height;
			return 0;
		}
	}

	return -EINVAL;
}

static int hm5065_queryctrl(struct v4l2_subdev *sd,
		struct v4l2_queryctrl *qc)
{
	return 0;
}

static int hm5065_set_brightness(struct v4l2_subdev *sd, int brightness)
{
	printk("[hm5065]set brightness %d\n", brightness);

	switch (brightness) {
	case BRIGHTNESS_L3:
		hm5065_write_array(sd, hm5065_brightness_l3);
		break;
	case BRIGHTNESS_L2:
		hm5065_write_array(sd, hm5065_brightness_l2);
		break;
	case BRIGHTNESS_L1:
		hm5065_write_array(sd, hm5065_brightness_l1);
		break;
	case BRIGHTNESS_H0:
		hm5065_write_array(sd, hm5065_brightness_h0);
		break;
	case BRIGHTNESS_H1:
		hm5065_write_array(sd, hm5065_brightness_h1);
		break;
	case BRIGHTNESS_H2:
		hm5065_write_array(sd, hm5065_brightness_h2);
		break;
	case BRIGHTNESS_H3:
		hm5065_write_array(sd, hm5065_brightness_h3);
		break;
	default:
		return -EINVAL;
	}

	return 0;
}

static int hm5065_set_contrast(struct v4l2_subdev *sd, int contrast)
{
	printk("[hm5065]set contrast %d\n", contrast);

	switch (contrast) {
	case CONTRAST_L3:
		hm5065_write_array(sd, hm5065_contrast_l3);
		break;
	case CONTRAST_L2:
		hm5065_write_array(sd, hm5065_contrast_l2);
		break;
	case CONTRAST_L1:
		hm5065_write_array(sd, hm5065_contrast_l1);
		break;
	case CONTRAST_H0:
		hm5065_write_array(sd, hm5065_contrast_h0);
		break;
	case CONTRAST_H1:
		hm5065_write_array(sd, hm5065_contrast_h1);
		break;
	case CONTRAST_H2:
		hm5065_write_array(sd, hm5065_contrast_h2);
		break;
	case CONTRAST_H3:
		hm5065_write_array(sd, hm5065_contrast_h3);
		break;
	default:
		return -EINVAL;
	}

	return 0;
}

static int hm5065_g_ctrl(struct v4l2_subdev *sd, struct v4l2_control *ctrl)
{
	struct hm5065_info *info = container_of(sd, struct hm5065_info, sd);
	struct v4l2_isp_setting isp_setting;
	int ret = 0;

	switch (ctrl->id) {
	case V4L2_CID_BRIGHTNESS:
		ctrl->value = info->brightness;
		break;
	case V4L2_CID_CONTRAST:
		ctrl->value = info->contrast;
		break;
	case V4L2_CID_FRAME_RATE:
		ctrl->value = info->frame_rate;
		break;
	case V4L2_CID_ISP_SETTING:
		isp_setting.setting = (struct v4l2_isp_regval *)&hm5065_isp_setting;
		isp_setting.size = ARRAY_SIZE(hm5065_isp_setting);
		memcpy((void *)ctrl->value, (void *)&isp_setting, sizeof(isp_setting));
		break;
	case V4L2_CID_ISP_PARM:
		ctrl->value = (int)&hm5065_isp_parm;
		break;
	default:
		ret = -EINVAL;
		break;
	}

	return ret;
}

static int hm5065_s_ctrl(struct v4l2_subdev *sd, struct v4l2_control *ctrl)
{
	struct hm5065_info *info = container_of(sd, struct hm5065_info, sd);
	int ret = 0;

	switch (ctrl->id) {
	case V4L2_CID_BRIGHTNESS:
		ret = hm5065_set_brightness(sd, ctrl->value);
		if (!ret)
			info->brightness = ctrl->value;
		break;
	case V4L2_CID_CONTRAST:
		ret = hm5065_set_contrast(sd, ctrl->value);
		if (!ret)
			info->contrast = ctrl->value;
		break;
	case V4L2_CID_FRAME_RATE:
		info->frame_rate = ctrl->value;
		break;
	case V4L2_CID_SET_FOCUS:
		break;
	default:
		ret = -EINVAL;
		break;
	}

	return ret;
}

static int hm5065_g_chip_ident(struct v4l2_subdev *sd,
		struct v4l2_dbg_chip_ident *chip)
{
	struct i2c_client *client = v4l2_get_subdevdata(sd);

	return v4l2_chip_ident_i2c_client(client, chip, V4L2_IDENT_HM5065, 0);
}

#ifdef CONFIG_VIDEO_ADV_DEBUG
static int hm5065_g_register(struct v4l2_subdev *sd, struct v4l2_dbg_register *reg)
{
	struct i2c_client *client = v4l2_get_subdevdata(sd);
	unsigned char val = 0;
	int ret;

	if (!v4l2_chip_match_i2c_client(client, &reg->match))
		return -EINVAL;
	if (!capable(CAP_SYS_ADMIN))
		return -EPERM;
	ret = hm5065_read(sd, reg->reg & 0xff, &val);
	reg->val = val;
	reg->size = 1;
	return ret;
}

static int hm5065_s_register(struct v4l2_subdev *sd, struct v4l2_dbg_register *reg)
{
	struct i2c_client *client = v4l2_get_subdevdata(sd);

	if (!v4l2_chip_match_i2c_client(client, &reg->match))
		return -EINVAL;
	if (!capable(CAP_SYS_ADMIN))
		return -EPERM;
	hm5065_write(sd, reg->reg & 0xff, reg->val & 0xff);
	return 0;
}
#endif

static const struct v4l2_subdev_core_ops hm5065_core_ops = {
	.g_chip_ident = hm5065_g_chip_ident,
	.g_ctrl = hm5065_g_ctrl,
	.s_ctrl = hm5065_s_ctrl,
	.queryctrl = hm5065_queryctrl,
	.reset = hm5065_reset,
	.init = hm5065_init,
#ifdef CONFIG_VIDEO_ADV_DEBUG
	.g_register = hm5065_g_register,
	.s_register = hm5065_s_register,
#endif
};

static const struct v4l2_subdev_video_ops hm5065_video_ops = {
	.enum_mbus_fmt = hm5065_enum_mbus_fmt,
	.try_mbus_fmt = hm5065_try_mbus_fmt,
	.s_mbus_fmt = hm5065_s_mbus_fmt,
	.s_stream = hm5065_s_stream,
	.cropcap = hm5065_cropcap,
	.g_crop	= hm5065_g_crop,
	.s_parm = hm5065_s_parm,
	.g_parm = hm5065_g_parm,
	.enum_frameintervals = hm5065_enum_frameintervals,
	.enum_framesizes = hm5065_enum_framesizes,
};

static const struct v4l2_subdev_ops hm5065_ops = {
	.core = &hm5065_core_ops,
	.video = &hm5065_video_ops,
};

static int hm5065_probe(struct i2c_client *client,
			const struct i2c_device_id *id)
{
	struct v4l2_subdev *sd;
	struct hm5065_info *info;
	int ret;

	info = kzalloc(sizeof(struct hm5065_info), GFP_KERNEL);
	if (info == NULL)
		return -ENOMEM;
	sd = &info->sd;
	v4l2_i2c_subdev_init(sd, client, &hm5065_ops);

	/* Make sure it's an hm5065 */
	ret = hm5065_detect(sd);
	if (ret) {
		v4l_err(client,
			"chip found @ 0x%x (%s) is not an hm5065 chip.\n",
			client->addr, client->adapter->name);
		kfree(info);
		return ret;
	}
	v4l_info(client, "hm5065 chip found @ 0x%02x (%s)\n",
			client->addr, client->adapter->name);

	return 0;
}

static int hm5065_remove(struct i2c_client *client)
{
	struct v4l2_subdev *sd = i2c_get_clientdata(client);
	struct hm5065_info *info = container_of(sd, struct hm5065_info, sd);

	v4l2_device_unregister_subdev(sd);
	kfree(info);
	return 0;
}

static const struct i2c_device_id hm5065_id[] = {
	{"hm5065", 0 },
	{ }
};
MODULE_DEVICE_TABLE(i2c, hm5065_id);

static struct i2c_driver hm5065_driver = {
	.driver = {
		.owner	= THIS_MODULE,
		.name	= "hm5065",
	},
	.probe		= hm5065_probe,
	.remove		= hm5065_remove,
	.id_table	= hm5065_id,
};

static __init int init_hm5065(void)
{
	return i2c_add_driver(&hm5065_driver);
}

static __exit void exit_hm5065(void)
{
	i2c_del_driver(&hm5065_driver);
}

fs_initcall(init_hm5065);
module_exit(exit_hm5065);

MODULE_DESCRIPTION("A low-level driver for GalaxyCore hm5065 sensors");
MODULE_LICENSE("GPL");
